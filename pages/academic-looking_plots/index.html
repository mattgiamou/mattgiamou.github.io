<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/libs/katex/katex.min.css"> <link rel=stylesheet  href="/libs/highlight/github.min.css"> <link rel=stylesheet  href="/css/franklin.css"> <link rel=stylesheet  href="/css/pure.css"> <link rel=stylesheet  href="/css/side-menu.css"> <style> .franklin-content{padding-left:10%;} @media (min-width: 940px) { .franklin-content {width: 800px; margin-left: 0px; padding-left: 100px;} .header {width: 700px;} } </style> <link rel=icon  href="/assets/img/mg_logo.png"> <title>Academic-Looking Plots</title> <div id=layout > <a href="#menu" id=menuLink  class=menu-link ><span></span></a> <div id=menu > <div class=pure-menu > <a class=pure-menu-heading  href="#">Matt Giamou</a> <ul class=pure-menu-list > <li class="pure-menu-item "><a href="/" class=pure-menu-link >Home</a> <li class="pure-menu-item "><a href="/research/" class=pure-menu-link >Research</a> <li class="pure-menu-item "><a href="/teaching/" class=pure-menu-link >Teaching</a> <li class="pure-menu-item "><a href="/software/" class=pure-menu-link >Software</a> <li class="pure-menu-item "><a href="/blog/" class=pure-menu-link >Blog</a> <li class="pure-menu-item "><a href="/assets/giamou_cv.pdf" class=pure-menu-link >CV</a> </ul> </div> </div> <div id=main > <div class=header > <h1>Academic-Looking Plots</h1> </div> <div class=franklin-content ><p>This tutorial is meant to document the <a href="https://juliapackages.com/p/plots"><code>Plots.jl</code></a> features I use to get an &quot;academic&quot;-looking plot like this:</p> <p><img src="/assets/img/blog/academic_plot.png" alt="Very academic and professional&#33;" /></p> <p>I am new to Julia, so keep in mind that I don&#39;t yet have a strong grasp of the most idiomatic way to get plots to look the way I want. This tutorial was made with <a href="https://fredrikekre.github.io/Literate.jl/">Literate.jl</a>; you can find the source code <a href="https://github.com/mattgiamou/mattgiamou.github.io/blob/master/_literate/academic_plots.jl">here</a>. Let&#39;s start with the required imports:</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> Plots
<span class=hljs-keyword >using</span> LaTeXStrings</code></pre> <p>We&#39;ll be using the <a href="https://juliapackages.com/p/gr"><code>GR</code></a> backend:</p> <pre><code class="julia hljs">gr()
Plots.GRBackend();</code></pre> <p>The plots are related to a simple time-delayed linear system. The parameters don&#39;t matter too much, I just wanted curves that looked a certain way.</p> <pre><code class="julia hljs">τ = -<span class=hljs-number >1</span>
τ′ = -<span class=hljs-number >2</span>
T = abs(τ)
t_extra = <span class=hljs-number >1</span>
t_end = T + t_extra
x_minus = <span class=hljs-number >0</span>
f = <span class=hljs-number >1000</span>
λ = -<span class=hljs-number >0.7</span>
A = <span class=hljs-number >0.8</span>;</code></pre> <p>Now that I&#39;ve specified the parameters describing the curves, let&#39;s generate them:</p> <pre><code class="julia hljs">t = range(τ, stop=t_end, length=<span class=hljs-built_in >Int</span>((t_end - τ)*f))
Δt = t[<span class=hljs-number >2</span>] - t[<span class=hljs-number >1</span>]
u = A*sin.(<span class=hljs-number >0.8</span>*<span class=hljs-literal >π</span>*(t.-τ)).*exp.(λ*(t.-τ))
x = x_minus .+ cumsum(u).*Δt

t′ = range(τ′, stop=t_end, length=<span class=hljs-built_in >Int</span>((t_end-τ′)*f))
u′ = [u[<span class=hljs-number >1</span>:f*T]; zeros(f*abs(τ′-τ)); u[T*f+<span class=hljs-number >1</span>:<span class=hljs-keyword >end</span>]]
x′ = x_minus .+ cumsum(u′).*Δt

t_y = range(<span class=hljs-number >0</span>, stop=t_end, length=<span class=hljs-built_in >Int</span>(t_end*f))
y = x[<span class=hljs-number >1</span>:length(t_y)]
y′ = x′[<span class=hljs-number >1</span>:length(t_y)];</code></pre> <p>Here&#39;s a deuteranopia &#40;green color-blindness&#41; friendly palette I found in <a href="https://venngage.com/blog/color-blind-friendly-palette/">an excellent tutorial</a>. The red color is actually from <a href="https://medium.com/cafe-pixo/inclusive-color-palettes-for-the-web-bbfe8cf2410e">another nice tutorial</a>.</p> <pre><code class="julia hljs">Σ_color = <span class=hljs-string >&quot;#092C48&quot;</span>
Σ′_color = <span class=hljs-string >&quot;#C59434&quot;</span>
accent_color = <span class=hljs-string >&quot;#6F7498&quot;</span>  <span class=hljs-comment ># Unused in this example</span>
light_blue_color = <span class=hljs-string >&quot;#A3B7F9&quot;</span>
red_color = <span class=hljs-string >&quot;#FF4242&quot;</span>;</code></pre> <p>Next comes the plot parameters. The <code>Computer Modern</code> font is needed to match the body text in academic conference and journal papers &#40;in computer science and engineering, at least&#41;.</p> <pre><code class="julia hljs">font_family = <span class=hljs-string >&quot;Computer Modern&quot;</span>
guide_font_size = <span class=hljs-number >12</span>
title_font_size = <span class=hljs-number >13</span>;</code></pre> <p>The <code>widen</code> parameter tightens the plot&#39;s viewport around the <code>x-</code> and <code>y-</code> extents, which are generated based on the input signal <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi><mo stretchy=false >(</mo><mi>t</mi><mo stretchy=false >)</mo></mrow><annotation encoding="application/x-tex">u(t)</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">u</span><span class=mopen >(</span><span class="mord mathnormal">t</span><span class=mclose >)</span></span></span></span>.</p> <pre><code class="julia hljs">widen = <span class=hljs-literal >false</span>
annotation_font_size = guide_font_size
lw = <span class=hljs-number >2.5</span>
x_extent = [τ′, t_end]
y_extent = <span class=hljs-number >1.15</span>*[minimum(u), maximum(u)]
y_extent2 = y_extent .+ <span class=hljs-number >0.2</span>
y_extent3 = y_extent2;</code></pre> <p>The <code>rectangle</code> convenience function is from <a href="https://github.com/JuliaPlots/ExamplePlots.jl/blob/master/notebooks/batman.ipynb">this tutorial</a>. I use it to shade sections of the plots.</p> <pre><code class="julia hljs">rectangle(w, h, x, y) = Shape(x .+ [<span class=hljs-number >0</span>,w,w,<span class=hljs-number >0</span>], y .+ [<span class=hljs-number >0</span>,<span class=hljs-number >0</span>,h,h])
shaded_alpha = <span class=hljs-number >0.15</span>;</code></pre> <p>Custom <code>x-</code>tick labels are easy to specify:</p> <pre><code class="julia hljs">x_ticks = [-<span class=hljs-number >2</span>, -<span class=hljs-number >1</span>, <span class=hljs-number >0</span>, <span class=hljs-number >1</span>, <span class=hljs-number >2</span>]
x_tick_labels = [<span class=hljs-string >L&quot;{\tau&#x27;={-2}}&quot;</span>, <span class=hljs-string >L&quot;\tau={-1}&quot;</span>, <span class=hljs-number >0</span>, <span class=hljs-string >L&quot;\tau_{+}=1&quot;</span>, <span class=hljs-number >2</span>]
y_ticks1 = [-<span class=hljs-number >0.2</span>, <span class=hljs-number >0.2</span>, <span class=hljs-number >0.6</span>]
y_ticks2 = [<span class=hljs-number >0</span>, <span class=hljs-number >0.4</span>, <span class=hljs-number >0.8</span>]
y_ticks3 = y_ticks2;</code></pre> <p>Let&#39;s get plotting&#33; I don&#39;t want any <code>x-</code>tick labels in this top plot. Most of the arguments here are fairly straightforward.</p> <pre><code class="julia hljs">p1 = plot(t, u, linecolor=Σ_color, linewidth=lw, label=<span class=hljs-string >L&quot;u(t)&quot;</span>, legend=(<span class=hljs-number >0.88</span>, <span class=hljs-number >0.65</span>), framestyle=:box, widen=widen, yticks=y_ticks1, xticks=(x_ticks, [<span class=hljs-string >&quot;&quot;</span> <span class=hljs-keyword >for</span> _ <span class=hljs-keyword >in</span> x_ticks]))
plot!(t′, u′, linecolor=Σ′_color, linewidth=lw, label=<span class=hljs-string >L&quot;u&#x27;(t)&quot;</span>, linestyle=:dash);</code></pre> <p>I want red shading to highlight a key region of this first plot.</p> <pre><code class="julia hljs">plot!(rectangle(T,<span class=hljs-number >12</span>,<span class=hljs-number >0</span>,-<span class=hljs-number >5</span>), opacity=shaded_alpha, color=red_color, linewidth=<span class=hljs-number >0</span>, label=<span class=hljs-literal >false</span>);</code></pre>
<p>I use <a href="">LaTeXStrings.jl</a> to conveniently place LaTeX annotations on the graph.</p>
<pre><code class="julia hljs">annotate!((<span class=hljs-number >0.52</span>, <span class=hljs-number >0.44</span>, text(<span class=hljs-string >L&quot;u(t)=u&#x27;(t)&quot;</span>, annotation_font_size)))
annotate!((<span class=hljs-number >0.52</span>, <span class=hljs-number >0.22</span>, text(<span class=hljs-string >L&quot;\forall t \in [0, \tau_{+}]&quot;</span>, annotation_font_size)));</code></pre>
<p>All that remains is to set the title, font sizes, axis extents, and save the result as a PDF.</p>
<pre><code class="julia hljs">title!(<span class=hljs-string >&quot;Inputs&quot;</span>)
plot!(fontfamily=font_family)
plot!(titlefontsize=title_font_size)
plot!(legendfontsize=guide_font_size)
plot!(tickfontsize=guide_font_size)
plot!(guidefontsize=guide_font_size)
xaxis!(x_extent)

yaxis!(y_extent);</code></pre>
<p><img src="/assets/img/blog/plot1.png" alt="The first subplot of interest." /></p>
<p><strong>Note</strong>: each sub-plot has been configured to look good when put in the final multi-plot, leading to labels and legends in weird positions when displayed individually.</p>
<p>The second sub-plot is quite similar to the first:</p>
<pre><code class="julia hljs">p2 = plot(t, x, linecolor=Σ_color, linewidth=lw, label=<span class=hljs-string >L&quot;x(t)&quot;</span>, legend=(<span class=hljs-number >0.88</span>, <span class=hljs-number >0.65</span>), framestyle=:box, widen=widen, xticks=(x_ticks, [<span class=hljs-string >&quot;&quot;</span> <span class=hljs-keyword >for</span> _ <span class=hljs-keyword >in</span> x_ticks]))
plot!(t′, x′, linecolor=Σ′_color, label=<span class=hljs-string >L&quot;x&#x27;(t)&quot;</span>, linestyle=:dash, linewidth=lw)
plot!(rectangle(abs(τ),<span class=hljs-number >12</span>,τ,-<span class=hljs-number >5</span>), opacity=shaded_alpha, color=light_blue_color, linewidth=<span class=hljs-number >0</span>, label=<span class=hljs-literal >false</span>)
plot!(rectangle(abs(τ),<span class=hljs-number >12</span>,τ′,-<span class=hljs-number >5</span>), opacity=shaded_alpha, color=light_blue_color, linewidth=<span class=hljs-number >0</span>, label=<span class=hljs-literal >false</span>)
scatter!([τ], [<span class=hljs-number >0</span>], markersize=<span class=hljs-number >4</span>, markercolor=Σ_color, markerstrokecolor=Σ_color, label=<span class=hljs-literal >false</span>)
annotate!((-<span class=hljs-number >0.84</span>, <span class=hljs-number >0.17</span>, text(<span class=hljs-string >L&quot;x^{-1}&quot;</span>, annotation_font_size)))
scatter!([<span class=hljs-number >0</span>], [x[f]], markersize=<span class=hljs-number >4</span>, color=Σ_color, markerstrokecolor=Σ_color, label=<span class=hljs-literal >false</span>)
annotate!((<span class=hljs-number >0.13</span>, <span class=hljs-number >0.57</span>, text(<span class=hljs-string >L&quot;x^0&quot;</span>, annotation_font_size)))
title!(<span class=hljs-string >&quot;States&quot;</span>)
plot!(fontfamily=font_family)
plot!(titlefontsize=title_font_size)
plot!(legendfontsize=guide_font_size)
plot!(tickfontsize=guide_font_size)
plot!(guidefontsize=guide_font_size)
yticks!(y_ticks2)
xaxis!(x_extent)
yaxis!(y_extent2);</code></pre>
<p><img src="/assets/img/blog/plot2.png" alt="The second subplot of interest." /></p>
<p>And the third plot is also very similar:</p>
<pre><code class="julia hljs">p3 = plot(t_y, y, linecolor=Σ_color, linewidth=lw, label=<span class=hljs-string >L&quot;y(t)=x(t+\tau)&quot;</span>, legend=(<span class=hljs-number >0.15</span>, <span class=hljs-number >0.65</span>), framestyle=:box, widen=widen)
plot!(t_y, y′, linecolor=Σ′_color, label=<span class=hljs-string >L&quot;y&#x27;(t)=x&#x27;(t+\tau&#x27;)&quot;</span>, linestyle=:dash, linewidth=lw)
plot!(rectangle(abs(τ),<span class=hljs-number >12</span>,<span class=hljs-number >0</span>,-<span class=hljs-number >5</span>), opacity=shaded_alpha, color=light_blue_color, linewidth=<span class=hljs-number >0</span>, label=<span class=hljs-literal >false</span>)
annotate!((<span class=hljs-number >0.37</span>, <span class=hljs-number >0.66</span>, text(<span class=hljs-string >L&quot;y(t)=y&#x27;(t)&quot;</span>, annotation_font_size)))
annotate!((<span class=hljs-number >0.37</span>, <span class=hljs-number >0.44</span>, text(<span class=hljs-string >L&quot;\forall t \in [0, \tau_{+}]&quot;</span>, annotation_font_size)))
xlabel!(<span class=hljs-string >&quot;Time (s)&quot;</span>)
title!(<span class=hljs-string >&quot;Outputs&quot;</span>);</code></pre>
<p>However, it does have <code>x-</code>tick labels &#40;since it&#39;s going to be at the bottom of our combined plot&#41;.</p>
<pre><code class="julia hljs">plot!(x_ticks=(x_ticks, x_tick_labels))
yticks!(y_ticks3)
plot!(fontfamily=font_family)
plot!(titlefontsize=title_font_size)
plot!(tickfontsize=guide_font_size)
plot!(guidefontsize=guide_font_size)
plot!(legendfontsize=guide_font_size)
xaxis!(x_extent)
yaxis!(y_extent3);</code></pre>
<p><img src="/assets/img/blog/plot3.png" alt="The third subplot of interest." /></p>
<p><code>Plots.jl</code> makes it really easy to combine the subplots into one figure:</p>
<pre><code class="julia hljs">p_final = plot(p1, p2, p3, layout=(<span class=hljs-number >3</span>,<span class=hljs-number >1</span>));</code></pre>
<p><img src="/assets/img/blog/final_plot.png" alt="The final product" /></p>
<p>Finally, you can save your figure as a PDF &#40;my preferred format for academic papers&#41; with <code>savefig&#40;&quot;path/you/want.pdf&quot;&#41;</code>.</p>

<div class=page-foot >
  <div class=copyright >
    &copy; Matt Giamou. Last modified: September 28, 2022. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>.
  </div>
</div>
</div>
      </div> 
  </div> 
  <script src="/libs/pure/ui.min.js"></script>